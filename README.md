# Azure AI Foundry Agent Chat UI
> [!IMPORTANT]
> ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ã€Github Copilot Agent ãƒ¢ãƒ¼ãƒ‰ã«ã‚ˆã‚Šã€Vive Coding ã—ãŸã‚‚ã®ã§ã™ã€‚

> [!Warning]
> ãƒ†ã‚¹ãƒˆãªã©ã‚‚ã€ååˆ†ã«å‡ºæ¥ã¦ã„ã¾ã›ã‚“ã®ã§ã€ã”åˆ©ç”¨ã®éš›ã¯ã”æ³¨æ„ãã ã•ã„ã€‚

Azure AI Foundry Agent ã¨é€£æºã™ã‚‹ãƒ¢ãƒ€ãƒ³ãªChat UIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã‚ˆã£ã¦AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨å¯¾è©±ã§ãã¾ã™ã€‚

![image](https://github.com/user-attachments/assets/b5f6e7de-a05c-47f6-8d12-3a4745eebea2)

## ğŸš€ æ©Ÿèƒ½

- âœ¨ **ãƒ¢ãƒ€ãƒ³ãªUI**: React + TypeScript + Tailwind CSSã«ã‚ˆã‚‹ç¾ã—ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- ğŸ¤– **Azure AI Foundry Agenté€£æº**: Azure AIã‚µãƒ¼ãƒ“ã‚¹ã¨ã®å®‰å…¨ãªé€šä¿¡
- âš™ï¸ **UIè¨­å®šæ©Ÿèƒ½**: ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ç°¡å˜ã«Azureè¨­å®šã‚’ç®¡ç†
- ğŸ’¬ **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆ**: ç›´æ„Ÿçš„ãªãƒãƒ£ãƒƒãƒˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- ğŸ”„ **è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤**: ä¸€æ™‚çš„ãªéšœå®³ã«å¯¾ã™ã‚‹è‡ªå‹•å¾©æ—§æ©Ÿèƒ½
- ğŸ›¡ï¸ **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: Azureèªè¨¼ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«æº–æ‹ 

## ğŸ“‹ å‰ææ¡ä»¶

- Node.js 18ä»¥ä¸Š
- Azure AI Foundry Agent
  - ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  - APIã‚­ãƒ¼
  - Agent ã®ä½œæˆ

## ğŸ› ï¸ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 2. è¨­å®šæ–¹æ³•

Azure AI Foundry Agentã®è¨­å®šã¯ã€UIä¸Šã§ç›´æ¥è¡Œã„ã¾ã™ï¼š

#### ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—

Azure AI Foundryã«ã¯æ­£ã—ã„ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ãŒå¿…è¦ã§ã™ã€‚Azure CLIã‚’ä½¿ç”¨ã—ã¦å–å¾—ã—ã¦ãã ã•ã„ï¼š

```bash
# Azure CLIã§ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆã¾ã ã®å ´åˆï¼‰
az login

# Azure AI Foundryç”¨ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—
az account get-access-token --scope https://ai.azure.com/.default | jq -r .accessToken
```

**jqãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆ:**

```bash
az account get-access-token --scope https://ai.azure.com/.default
```

å‡ºåŠ›ã•ã‚ŒãŸJSONã‹ã‚‰æ‰‹å‹•ã§`accessToken`ã®å€¤ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚

#### UIä¸Šã§ã®è¨­å®š

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã™ã‚‹ã¨ã€è¨­å®šç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ä»¥ä¸‹ã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š

- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆURL**: `https://[YOUR_AIFOUNDRY].services.ai.azure.com/api/projects/[YOURPROJECT]`
- **ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³**: ä¸Šè¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã§å–å¾—ã—ãŸã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³
- **Agent ID**: ä½¿ç”¨ã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®IDã‚’ä¸€è¦§ã‹ã‚‰é¸æŠ

è¨­å®šã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã•ã‚Œã€ãƒãƒ£ãƒƒãƒˆç”»é¢ã®è¨­å®šãƒœã‚¿ãƒ³ã‹ã‚‰ã„ã¤ã§ã‚‚å¤‰æ›´ã§ãã¾ã™ã€‚

> [!TIP]
> ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã®è¦³ç‚¹ã‹ã‚‰ã€ç’°å¢ƒå¤‰æ•°ã§ã¯ãªãUIä¸Šã§ã®è¨­å®šã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚

### 3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ <http://localhost:5173> ã‚’é–‹ã„ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

## ğŸ—ï¸ ãƒ“ãƒ«ãƒ‰

ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç”¨ãƒ“ãƒ«ãƒ‰ã‚’ä½œæˆï¼š

```bash
npm run build
```

ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯`dist`ãƒ•ã‚©ãƒ«ãƒ€ã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚

## ğŸ³ Docker ã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤

### Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã¨å®Ÿè¡Œ

1. **Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰:**

```bash
docker build -t azure-ai-foundry-chat-ui .
```

2. **Docker ã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè¡Œ:**

```bash
docker run -d --rm \
  --name azure-ai-chat \
  -p 8080:8080 \
  azure-ai-foundry-chat-ui
```

3. **ã‚¢ã‚¯ã‚»ã‚¹:**
   - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³: <http://localhost:8080>
   - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯: <http://localhost:8080/health>

4. **åœæ­¢:**

```bash
docker stop azure-ai-chat
```

### Build æ¸ˆã¿ Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã®å®Ÿè¡Œ
1. **Docker ã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè¡Œ:**

```bash
docker run -d --rm \     
  --name azure-ai-chat \
  -p 8080:8080 \
  takuyak/azure-ai-foundry-chat-ui:latest
```

2. **ã‚¢ã‚¯ã‚»ã‚¹:**
   - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³: <http://localhost:8080>
   - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯: <http://localhost:8080/health>

3. **åœæ­¢:**

```bash
docker stop azure-ai-chat
```

## ğŸ“š ä½¿ç”¨æ–¹æ³•

1. **åˆæœŸè¨­å®š**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã™ã‚‹ã¨è¨­å®šç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚Azure AI Foundryã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
2. **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡**: ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã€Enterã‚­ãƒ¼ã¾ãŸã¯é€ä¿¡ãƒœã‚¿ãƒ³ã§AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«é€ä¿¡
3. **è¨­å®šå¤‰æ›´**: ãƒãƒ£ãƒƒãƒˆç”»é¢å³å´ã§ã€ã„ã¤ã§ã‚‚è¨­å®šã‚’å¤‰æ›´å¯èƒ½
4. **å¯¾è©±å±¥æ­´**: é€ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨AIã‹ã‚‰ã®å¿œç­”ãŒæ™‚ç³»åˆ—ã§è¡¨ç¤º

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **React 18**: UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **TypeScript**: å‹å®‰å…¨ãªé–‹ç™º
- **Vite**: é«˜é€Ÿãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«
- **Tailwind CSS**: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆCSS

### Azureé€£æº
- **Azure AI Foundry Agent API**: ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã®ä¸­æ ¸
- **Axios**: HTTPé€šä¿¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤**: æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ã«ã‚ˆã‚‹éšœå®³å¾©æ—§

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ã‚ˆã‚‹è¨­å®šç®¡ç†
- CSRFãƒ—ãƒ­ãƒ†ã‚¯ã‚·ãƒ§ãƒ³
- ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã¨ã‚µã‚¤ã‚ºã®æ¤œè¨¼

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
src/
â”œâ”€â”€ components/              # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ChatInterface.tsx    # ãƒ¡ã‚¤ãƒ³ãƒãƒ£ãƒƒãƒˆç”»é¢
â”‚   â”œâ”€â”€ ChatMessage.tsx      # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ConfigurationPanel.tsx # è¨­å®šãƒ‘ãƒãƒ«ï¼ˆåˆæœŸè¨­å®šç”¨ï¼‰
â”‚   â”œâ”€â”€ SettingsPanel.tsx    # è¨­å®šç®¡ç†ãƒ‘ãƒãƒ«
â”‚   â””â”€â”€ SetupWizard.tsx      # åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰
â”œâ”€â”€ hooks/                   # Reactã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â””â”€â”€ useAzureConfig.ts    # Azureè¨­å®šç®¡ç†ãƒ•ãƒƒã‚¯
â”œâ”€â”€ services/                # APIã‚µãƒ¼ãƒ“ã‚¹
â”‚   â””â”€â”€ azureAgentService.ts # Azure AI Foundry Agent APIé€£æº
â”œâ”€â”€ types/                   # TypeScriptå‹å®šç¾©
â”‚   â””â”€â”€ agent.ts             # Chat/Agenté–¢é€£ã®å‹å®šç¾©
â”œâ”€â”€ assets/                  # é™çš„ã‚¢ã‚»ãƒƒãƒˆ
â”‚   â””â”€â”€ react.svg            # Reactãƒ­ã‚´
â”œâ”€â”€ App.tsx                  # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ App.css                  # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®ã‚¹ã‚¿ã‚¤ãƒ«
â”œâ”€â”€ index.css                # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆTailwind CSSå«ã‚€ï¼‰
â”œâ”€â”€ main.tsx                 # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â””â”€â”€ vite-env.d.ts           # Viteç’°å¢ƒå¤‰æ•°ã®å‹å®šç¾©
```

## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [ã‚¯ã‚¤ãƒƒã‚¯ ã‚¹ã‚¿ãƒ¼ãƒˆ: Azure AI Foundry ã®æ¦‚è¦ Foundry ãƒ™ãƒ¼ã‚¹](https://learn.microsoft.com/ja-jp/azure/ai-foundry/quickstarts/get-started-code?tabs=azure-ai-foundry&pivots=fdp-project)
- [Azure AI Foundry Agent REST API Data Plane](https://learn.microsoft.com/en-us/rest/api/aifoundry/aiagents/operation-groups?view=rest-aifoundry-aiagents-v1)
- [React Documentation](https://react.dev/)
- [TypeScript Documentation](https://www.typescriptlang.org/)
- [Tailwind CSS Documentation](https://tailwindcss.com/)
